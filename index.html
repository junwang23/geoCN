<!DOCTYPE html>

<head>
    <meta charset="utf-8">
</head>

<body>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin=""></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/geo-viewport/v0.1.1/geo-viewport.js'></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/geojson-extent/v0.0.1/geojson-extent.js'></script>
    <script src="//d3js.org/d3.v4.js"></script>
    <style>
        #map {
            margin: 10px;
            width: 960px;
            height: 600px;
        }
    </style>

    <div id='map'>
    </div>
    <script>
        var width = 960,
            height = 600,
            box = [73.4875, 18.1158, 135.0989, 53.5638], // [WSEN] format   
            center = [box[0], box[1]];

        var map = L.map('map');

        var mapbox_token = 'pk.eyJ1IjoiYmVhcjExMDIiLCJhIjoiY2o3OWd4YzIzMDIxODJ6bzlhem90MW1qcyJ9.mmRilxJfDRS-YPXLqvDAQQ';

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=' + mapbox_token, {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.light',
            accessToken: mapbox_token
        }).addTo(map);


        d3.json('china.json', function(err, geo) {
            // Calculate a bounding box in west, south, east, north order.
            var bounds = geojsonExtent(geo);

            // The size of the desired map.
            var size = [width, height];

            // Calculate a zoom level and centerpoint for this map.
            var vp = geoViewport.viewport(bounds, size);
            console.log(vp);

            L.geoJson(geo.features).addTo(map);
            map.setView(vp.center.reverse(), vp.zoom);
        });
    </script>
</body>